!function(e){var n=function(e,n){var t=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="arraybuffer",t.send(),t.onload=function(){var e=new Uint8Array(t.response),o=new Blob([e],{type:"video/webm"});n(o)}},t=function(e,n,t,o){var r=new FileReader;r.onload=function(n){e.timestampOffset=t,e.appendBuffer(new Uint8Array(n.target.result)),o&&o()},r.readAsArrayBuffer(n)},o=function(e,o,r,i){n(o,function(n){t(e,n,r,i)})},r=function(e,n,t){e.addEventListener("sourceopen",function(){var r=e.addSourceBuffer(t),i=n.shift(),u=i.source,a=i.timestampOffset;o(r,u,a,function(){r.addEventListener("updateend",function(){if(n.length>0){var t=n.shift(),i=t.source,u=t.timestampOffset;o(r,i,u)}else e.endOfStream()})})})},i=function(e,n,t){var o=new MediaSource;e.src=window.URL.createObjectURL(o),r(o,n,t)},u=function(n,t,o){n.prop("tagName")!==o&&e.error("Called $."+t+" on a non "+o+" tag.")},a=function(e,n,t){return JSON.parse(e.attr(n+t))},c=function(n,t){var o="data-"+n+"sequence-",r=a(t,o,"sources"),i=a(t,o,"offsets"),u=[];return e.each(r,function(e,n){var t=i[e];u.push({source:n,timestampOffset:t})}),u},s=function(e,n,t,o){return u(n,e+"sequence",e.toUpperCase()),i(n[0],t,o),n};e.fn.videosequence=function(e){return s("video",this,e,'video/webm; codecs="vorbis,vp8"')},e.fn.audiosequence=function(e){return s("audio",this,e,'audio/webm; codecs="vorbis"')};var f=function(n){var t=n+"sequence";e.each(e('[data-rel="'+n+'sequence"]'),function(o,r){var i=e(r),u=c(n,i);i[t].call(i,u)})},d=function(){f("video"),f("audio")};e(d),e(document).on("videosequence:initialize",d),e(document).on("audiosequence:initialize",d)}(jQuery);